{% extends "global/NoRefreshWaitPage.html" %}
{% load otree static %}

{% block title %}{% endblock %}

{% block content %}
    <style>
        .center-text {
            text-align: center;
        }
        p {
            font-size: 20px;
        }
        .counter-container {
            background-color: #e6f7ff;
            border-radius: 8px;
            padding: 15px;
            margin: 20px auto;
            max-width: 500px;
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
        }
        .counter {
            font-size: 24px;
            font-weight: bold;
            color: #0066cc;
        }
        .card {
            border-radius: 12px;
            box-shadow: 0 10px 20px rgba(0,0,0,0.1);
            max-width: 800px;
            margin: 0 auto;
            background-color: white;
            padding: 20px;
        }
        .refresh-indicator {
            color: #999;
            font-size: 14px;
            margin-top: 30px;
        }
    </style>

    <div class="card">
        <div style="text-align: center;">
            <h2>Waiting for other players to join...</h2>
            <br>

            <!-- Participant Counter -->
            <div class="counter-container">
                <p>Currently waiting: <span class="counter" id="waiting-count">{{ waiting_count }}</span> of {{ group_size }} players</p>
                {% if players_needed > 0 %}
                    <p>Need <span class="counter" id="needed-count">{{ players_needed }}</span> more to start</p>
                {% endif %}
            </div>
            
            <br>
            <p>Each game is made up of <b>{{ group_size }} participants,</b> please wait to be matched.</p>
            <br>
            <p class="refresh-indicator">This page will refresh automatically every 30 seconds to update the waiting player count.</p>
        </div>
    </div>

    <script>
        // Set up automatic page refresh
        function setupPageRefresh() {
            // Refresh the page every 30 seconds
            setTimeout(function() {
                // Reload the page
                window.location.reload();
            }, 5000); // 50 seconds
        }

        // Initialize page refresh timer
        setupPageRefresh();
    </script>
{% endblock %}